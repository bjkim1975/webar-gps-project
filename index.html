<!DOCTYPE html>
<html>
<head>
    <title>GPS Update with Turf.js</title>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf"></script>
</head>
<body>
    <h1>GPS Movement Simulation</h1>
    <div>Current Latitude: <span id="current-lat"></span>, Longitude: <span id="current-lon"></span></div>
    <div>Destination Latitude: <span id="destination-lat"></span>, Longitude: <span id="destination-lon"></span></div>
    <div>Distance to Destination: <span id="distance"></span> meters</div>

    <script>
        let currentLat = 37.556738; // 초기 위도
        let currentLon = 126.975960; // 초기 경도
        const initialDistance = 2; // 2 미터 북쪽

        // 초기 목적지 설정
        let destination = turf.destination([currentLon, currentLat], initialDistance / 1000, 0, {units: 'kilometers'});
        let destinationLat = destination.geometry.coordinates[1];
        let destinationLon = destination.geometry.coordinates[0];

        function updatePosition() {
            // 현재 위치 표시
            document.getElementById('current-lat').textContent = currentLat.toFixed(6);
            document.getElementById('current-lon').textContent = currentLon.toFixed(6);

            // 목적지 위치 표시
            document.getElementById('destination-lat').textContent = destinationLat.toFixed(6);
            document.getElementById('destination-lon').textContent = destinationLon.toFixed(6);

            // 거리 계산 및 표시
            const from = turf.point([currentLon, currentLat]);
            const to = turf.point([destinationLon, destinationLat]);
            const options = {units: 'meters'};
            let distance = turf.distance(from, to, options);
            document.getElementById('distance').textContent = distance.toFixed(2);

            // 현재 위치를 약간 북쪽으로 이동
            let newPoint = turf.destination([currentLon, currentLat], 0.002, 0, {units: 'kilometers'});
            currentLat = newPoint.geometry.coordinates[1];
            currentLon = newPoint.geometry.coordinates[0];
        }

        // 0.5초마다 위치 업데이트
        setInterval(updatePosition, 500);
    </script>
</body>
</html>
